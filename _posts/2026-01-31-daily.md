---
layout: post
title: "Lively Wallpaper用の動画再生サーバ"
date: 2026-01-31 17:00:00 +0900
tags: [プログラム]
---

Lively Wallpaperで動画を壁紙にするときに、フォルダ内の壁紙を順番、もしくはランダムに再生する機能が欲しかった。


既存のLively Wallpaperは単一の動画ファイルの指定だけなので、WEBサーバーに接続できる機能を使用して、欲しい機能を実装した。

## 機能要件

- 指定フォルダ内の動画ファイルを順番、もしくはランダムに再生
- 指定した時間間隔で切り替え
- 動画ファイルはループ再生
- 動画は無音、全画面、カーソルに反応しないようにする（壁紙みたいに扱いたい）
- 拡張子はwebmのみ

## 実装

- Webサーバ: Flask
- 動画再生プレイヤー: JavaScript
- 動画再生の設定: CSS

で実装。

Flaskで動画ファイルのリストを取得し、HTMLテンプレートに渡す。
JavaScriptで動画リストを受け取り、順番またはランダムに再生するロジックを実装。
CSSで動画プレイヤーのスタイルを設定し、無音、全画面、カーソルに反応しないように調整。


## 動作手順

- 動画ファイルを指定フォルダに配置
- 適当にサーバーを起動
- Lively WallpaperでサーバーのURLを指定
- 壁紙として動画が再生される

でうまく機能した。
コンフィグファイルの追加や別途GUIでサーバーを起動/削除/設定できるようにすれば、より便利かも。

## 終わりに

Vibeコーディングで行けそうな範囲はこのレベルの単位が限界かなあと思うところもあり。

より複雑な設定やGUIが入るならもうちょっと設計してから実装が必要そう。
今回も仕様が微妙に変わると、ファイル変更点の影響が大きくなりがち。
さらに大規模なら設計固めて実装する方がベター。